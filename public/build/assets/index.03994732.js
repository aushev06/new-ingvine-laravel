import{j as c,F as _,a as t,f as y,ap as C,aa as h,aj as D,L as N,a9 as g,r as f,b as w,a7 as P}from"./app.d2687fb3.js";import{T as B,B as x,L as b,I as T}from"./dividerClasses.501566c5.js";import{I as R}from"./index.56882206.js";import{L as E,D as L,I as k}from"./index.786a089e.js";import{D as j}from"./Divider.1bb70555.js";const q="/build/assets/empty-cart.053199bd.svg",A="_cartPaper_1d8ov_1",H="_cartList_1d8ov_7",S="_cartHeader_1d8ov_15",F="_cartRemoveItem_1d8ov_25",M="_cardRoot_1d8ov_32",O="_cardDetails_1d8ov_38",Q="_cartItemImage_1d8ov_44",V="_cartItemInfo_1d8ov_55",$="_cartItemInfoButtons_1d8ov_59",z="_cartItemInfoPrice_1d8ov_67",G="_cartItem_1d8ov_44",J="_optionName_1d8ov_81",K="_cartItemInfoName_1d8ov_93",U="_button_1d8ov_105",W="_buttonText_1d8ov_138",X="_name_1d8ov_159",Y="_cartProgressBar_1d8ov_170",Z="_cartIsEmptyInfo_1d8ov_170",tt="_cartBottom_1d8ov_193",at="_cartBottomTotalCount_1d8ov_201",et="_cartDivider_1d8ov_205",ot="_item_1d8ov_209",nt="_mainItemBoldText_1d8ov_221",ct="_closeIcon_1d8ov_226",a={cartPaper:A,cartList:H,cartHeader:S,cartRemoveItem:F,cardRoot:M,cardDetails:O,cartItemImage:Q,cartItemInfo:V,cartItemInfoButtons:$,cartItemInfoPrice:z,cartItem:G,optionName:J,cartItemInfoName:K,button:U,buttonText:W,name:X,cartProgressBar:Y,cartIsEmptyInfo:Z,cartBottom:tt,cartBottomTotalCount:at,cartDivider:et,item:ot,mainItemBoldText:nt,closeIcon:ct},rt=({classes:r,id:n,image:i,name:s,count:e,price:u,onPlus:o,onMinus:I,onRemove:p,description:d,options:l=[]})=>c(_,{children:[c(E,{className:a.cartItem,children:[t("div",{className:a.cartItemImage,children:t("img",{src:i})}),c("div",{className:a.cartItemInfoName,children:[t(B,{variant:"h6",className:a.name,children:s}),t("div",{children:l.map(m=>c("div",{className:a.optionName,children:[m.name," x ",m.quantity]},m.id))}),c("div",{children:[u," \u20BD"]})]}),t("div",{children:t(R,{quantity:e,onDecrement:I,onIncrement:o})})]},n),t(j,{className:a.cartDivider,variant:"inset",component:"li"})]}),st=({classes:r,id:n,name:i,image:s,price:e,product:u,options:o=[],type:I,handleClickRemove:p,quantity:d,sum:l})=>{const m=y(),[v]=C();return t(rt,{classes:r,id:n,count:d,name:i,image:s,price:l,onPlus:async()=>{await v([{id:n,quantity:d+1}]),m(await h())},onMinus:async()=>{await v([{id:n,quantity:d-1}]),m(await h())},onRemove:()=>p(n),description:"",options:o})},it=({onClose:r,items:n,opened:i=!1,totalPrice:s})=>{const e=async o=>{window.confirm("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C ? ")&&await g.destroyProperty(o)};let u=null;return n.length||(u=c("div",{className:a.cartIsEmptyInfo,children:[t("img",{src:q}),t(B,{children:"\u041A\u043E\u0440\u0437\u0438\u043D\u0430 \u043F\u0443\u0441\u0442\u0430"}),t(x,{onClick:r,variant:"contained",color:"secondary",children:"\u041D\u0430\u0437\u0430\u0434"})]})),n.length&&(u=t(_,{children:t("div",{className:a.cardDetails,children:t(b,{classes:{root:a.cartList},children:n.map(o=>t(st,{id:o.id,name:o.name,image:o.img,quantity:o.quantity,price:o.price,options:o.options,handleClickRemove:e,sum:o.sum},o.id))})})})),t(L,{anchor:"right",classes:{paper:a.cartPaper},open:i,onClose:r,children:c("div",{className:a.cardRoot,children:[c("div",{className:a.cartHeader,children:[t("h1",{children:"\u0417\u0430\u043A\u0430\u0437"}),t(D,{"data-test-id":"cart-drawer-close-btn",className:a.closeButton,onClick:r,children:t(T,{type:"close"})})]}),u,n.length?t("div",{children:c(N,{onClick:()=>r(),href:"/pay",className:a.button,children:[t("span",{className:a.buttonText,children:"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C"}),c("span",{children:[s," \u20BD"]})]})}):null]})})};function ht(){const r=window.location.pathname,[n]=f.exports.useState(0),[i,s]=f.exports.useState(r&&window.location.search.includes("token")),e=w(P);return c(_,{children:[t(k,{onClick:()=>s(!0),text:`${(e==null?void 0:e.total)||0} \u20BD`,iconType:"bottomCart"}),t(it,{totalCount:n,totalPrice:e==null?void 0:e.total,opened:i,onClose:()=>s(!1),items:(e==null?void 0:e.cartProperties)||[]})]})}export{ht as default};
