import{j as c,F as _,a as t,f as B,ap as y,aa as x,aj as C,L as D,a9 as N,r as f,b as g,a7 as w}from"./app.f04f4af4.js";import{T as v,B as P,L as b,I as T}from"./dividerClasses.7b4717da.js";import{I as R}from"./index.0e5f3a18.js";import{L as E,D as L,I as k}from"./index.38caafd5.js";import{D as j}from"./Divider.a583a8b2.js";const q="/build/assets/empty-cart.a6b390b2.svg",A="_cartPaper_51xl8_1",H="_cartList_51xl8_7",S="_cartHeader_51xl8_15",F="_cartRemoveItem_51xl8_25",M="_cardRoot_51xl8_32",O="_cardDetails_51xl8_38",Q="_cartItemImage_51xl8_44",V="_cartItemInfo_51xl8_55",$="_cartItemInfoButtons_51xl8_59",z="_cartItemInfoPrice_51xl8_67",G="_cartItem_51xl8_44",J="_optionName_51xl8_81",K="_cartItemInfoName_51xl8_93",U="_button_51xl8_105",W="_buttonText_51xl8_138",X="_name_51xl8_159",Y="_cartProgressBar_51xl8_170",Z="_cartIsEmptyInfo_51xl8_170",tt="_cartBottom_51xl8_193",at="_cartBottomTotalCount_51xl8_201",et="_cartDivider_51xl8_205",nt="_item_51xl8_209",ot="_mainItemBoldText_51xl8_221",ct="_closeIcon_51xl8_226",a={cartPaper:A,cartList:H,cartHeader:S,cartRemoveItem:F,cardRoot:M,cardDetails:O,cartItemImage:Q,cartItemInfo:V,cartItemInfoButtons:$,cartItemInfoPrice:z,cartItem:G,optionName:J,cartItemInfoName:K,button:U,buttonText:W,name:X,cartProgressBar:Y,cartIsEmptyInfo:Z,cartBottom:tt,cartBottomTotalCount:at,cartDivider:et,item:nt,mainItemBoldText:ot,closeIcon:ct},rt=({classes:r,id:o,image:i,name:s,count:e,price:u,onPlus:n,onMinus:I,onRemove:p,description:m,options:d=[]})=>c(_,{children:[c(E,{className:a.cartItem,children:[t("div",{className:a.cartItemImage,children:t("img",{src:i})}),c("div",{className:a.cartItemInfoName,children:[t(v,{variant:"h6",className:a.name,children:s}),t("div",{children:d.map(l=>c("div",{className:a.optionName,children:[l.name," x ",l.quantity]},l.id))}),c("div",{children:[u," \u20BD"]})]}),t("div",{children:t(R,{quantity:e,onDecrement:I,onIncrement:n})})]},o),t(j,{className:a.cartDivider,variant:"inset",component:"li"})]}),st=({classes:r,id:o,name:i,image:s,price:e,product:u,options:n=[],type:I,handleClickRemove:p,quantity:m,sum:d})=>{const l=B(),[h]=y();return t(rt,{classes:r,id:o,count:m,name:i,image:s,price:d,onPlus:async()=>{await h([{id:o,quantity:m+1}]),l(await x())},onMinus:async()=>{await h([{id:o,quantity:m-1}]),l(await x())},onRemove:()=>p(o),description:"",options:n})},it=({onClose:r,items:o,opened:i=!1,totalPrice:s})=>{const e=async n=>{window.confirm("\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C ? ")&&await N.destroyProperty(n)};let u=null;return o.length||(u=c("div",{className:a.cartIsEmptyInfo,children:[t("img",{src:q}),t(v,{children:"\u041A\u043E\u0440\u0437\u0438\u043D\u0430 \u043F\u0443\u0441\u0442\u0430"}),t(P,{onClick:r,variant:"contained",color:"secondary",children:"\u041D\u0430\u0437\u0430\u0434"})]})),o.length&&(u=t(_,{children:t("div",{className:a.cardDetails,children:t(b,{classes:{root:a.cartList},children:o.map(n=>t(st,{id:n.id,name:n.name,image:n.img,quantity:n.quantity,price:n.price,options:n.options,handleClickRemove:e,sum:n.sum},n.id))})})})),t(L,{anchor:"right",classes:{paper:a.cartPaper},open:i,onClose:r,children:c("div",{className:a.cardRoot,children:[c("div",{className:a.cartHeader,children:[t("h1",{children:"\u0417\u0430\u043A\u0430\u0437"}),t(C,{"data-test-id":"cart-drawer-close-btn",className:a.closeButton,onClick:r,children:t(T,{type:"close"})})]}),u,o.length?t("div",{children:c(D,{onClick:()=>r(),href:"/pay",className:a.button,children:[t("span",{className:a.buttonText,children:"\u041E\u0444\u043E\u0440\u043C\u0438\u0442\u044C"}),c("span",{children:[s," \u20BD"]})]})}):null]})})};function xt(){const r=window.location.pathname,[o]=f.exports.useState(0),[i,s]=f.exports.useState(r&&window.location.search.includes("token")),e=g(w);return c(_,{children:[t(k,{onClick:()=>s(!0),text:`${(e==null?void 0:e.total)||0} \u20BD`,iconType:"bottomCart"}),t(it,{totalCount:o,totalPrice:e==null?void 0:e.total,opened:i,onClose:()=>s(!1),items:(e==null?void 0:e.cartProperties)||[]})]})}export{xt as default};
