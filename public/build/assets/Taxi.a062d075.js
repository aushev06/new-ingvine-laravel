import{B as M,A as I,Z as T,t as f,r as g,I as F,q as b,a,f as w,K as E,T as R,Q as P,av as V,aw as X,R as v,S as H,a5 as L,a6 as x,j as m,F as G,H as Q,ax as q,ay as K}from"./app.780865c4.js";import"./Result.module.4f04610d.js";import{M as W}from"./MainLayout.93fd18ee.js";import{s as y,A as Z}from"./Pay.module.44110533.js";import{u as z}from"./index.61d0247f.js";import{F as J}from"./FormLabel.3a9d1279.js";import{T as N}from"./TextField.148e698b.js";import{B as A}from"./index.86c9ae93.js";import"./index.5bd54801.js";import"./NavLink.490740ed.js";function Y(e){return M("MuiDialogActions",e)}I("MuiDialogActions",["root","spacing"]);const ee=["className","disableSpacing"],te=e=>{const{classes:o,disableSpacing:n}=e;return E({root:["root",!n&&"spacing"]},Y,o)},oe=T("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:n}=e;return[o.root,!n.disableSpacing&&o.spacing]}})(({ownerState:e})=>f({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),se=g.exports.forwardRef(function(o,n){const s=F({props:o,name:"MuiDialogActions"}),{className:d,disableSpacing:p=!1}=s,l=b(s,ee),u=f({},s,{disableSpacing:p}),i=te(u);return a(oe,f({className:w(i.root,d),ownerState:u,ref:n},l))}),ae=se;function ne(e){return M("MuiDialogContentText",e)}I("MuiDialogContentText",["root"]);const ue=["children","className"],ie=e=>{const{classes:o}=e,s=E({root:["root"]},ne,o);return f({},o,s)},re=T(R,{shouldForwardProp:e=>P(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,o)=>o.root})({}),le=g.exports.forwardRef(function(o,n){const s=F({props:o,name:"MuiDialogContentText"}),{className:d}=s,p=b(s,ue),l=ie(p);return a(re,f({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:p,className:w(l.root,d)},s,{classes:l}))}),ce=le,de=["className","id"],pe=e=>{const{classes:o}=e;return E({root:["root"]},X,o)},me=T(R,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,o)=>o.root})({padding:"16px 24px",flex:"0 0 auto"}),ge=g.exports.forwardRef(function(o,n){const s=F({props:o,name:"MuiDialogTitle"}),{className:d,id:p}=s,l=b(s,de),u=s,i=pe(u),{titleId:C=p}=g.exports.useContext(V);return a(me,f({component:"h2",className:w(i.root,d),ownerState:u,ref:n,variant:"h6",id:C},l))}),he=ge;function be(e){const[o,n]=v.useState(!1),s=H(),d=z(s.breakpoints.down("md")),[p,l]=v.useState(null),u=()=>{n(!0)},i=()=>{n(!1)},{openAlert:C}=L(),S=`${e.model.street} ${e.model.house}`,[h,_]=v.useState(localStorage.getItem("phone")||""),r={lat:43.171146,lon:44.805809,kind:"point",city:"",address:"AlikeHome (\u041C\u0410\u0413\u0410\u0421)",value:"AlikeHome (\u041C\u0410\u0413\u0410\u0421)"},[c,k]=g.exports.useState(null);g.exports.useEffect(()=>{$()},[r,c]);const B=t=>{k(t)},U=()=>{const t=new FormData;t.append("test_field1",r.address),t.append("source_lat",r.lat),t.append("source_lon",r.lon),t.append("test_field2",c.address),t.append("destination_lat",c.lat),t.append("destination_lon",c.lon),t.append("source_time_iso8601",new Date().toISOString()),t.append("phone",h),t.append("test_field3",""),t.append("comment","\u041A\u0443\u0440\u044C\u0435\u0440\u0441\u043A\u0430\u044F \u0434\u043E\u0441\u0442\u0430\u0432\u043A\u0430"),t.append("address_source",r.address),t.append("address_destination",c.address),t.append("name","\u0418\u043D\u0433\u0432\u0430\u0439\u043D \u043A\u0430\u0444\u0435"),t.append("auth_token",e.settings.taxi_token),x.post("https://websites.platform.taximaster.ru/v2/order",t,{headers:{"Sec-Fetch-Dest":"empty","Sec-Fetch-Mod":"cors","Sec-Fetch-Site":"same-origin","X-Site-VtmId":"134","X-Site-VtmGroupId":"56",Accept:"*/*"}}).then(D=>{localStorage.setItem("phone",h),i(),C("\u0417\u0430\u043A\u0430\u0437 \u0441\u043E\u0437\u0434\u0430\u043D")}).catch(D=>{D.response&&Object.values(D.response.data.errors).map(j=>{Object.values(j).map(O=>{alert(O.join(`
`))})})})},$=()=>{if(r===null||c===null)return;const t=new FormData;t.append("source_lat",r.lat),t.append("source_lon",r.lon),t.append("destination_lat",c.lat),t.append("destination_lon",c.lon),t.append("source_time_iso8601",new Date().toISOString()),x.defaults.withCredentials=!1,x.post("https://websites.platform.taximaster.ru/v2/calc_order_cost",t,{headers:{"Sec-Fetch-Dest":"empty","Sec-Fetch-Mod":"cors","Sec-Fetch-Site":"same-origin","X-Site-VtmId":"134","X-Site-VtmGroupId":"56",Accept:"*/*"}}).then(D=>{l(D.data)})};return m(G,{children:[a(Q,{title:"\u041E\u043F\u043B\u0430\u0442\u0430"}),m(W,{disableCategories:!0,children:[a("div",{style:{marginBottom:10},children:a(J,{className:y.formControl,children:a(N,{onChange:t=>_(t.target.value),placeholder:"+7(___)___-____",defaultValue:h,className:y.input,label:a("span",{className:y.label,children:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D"}),variant:"filled",InputProps:{disableUnderline:!0}})})}),a(fe,{address:S,onSelect:B}),a("br",{}),a(A,{style:{backgroundColor:"#EB3800"},onClick:u,variant:"contained",color:"secondary",children:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043A\u0430\u0437"}),m(q,{fullScreen:d,open:o,onClose:i,"aria-labelledby":"responsive-dialog-title",children:[a(he,{id:"responsive-dialog-title",children:"\u0412\u044B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043A\u0430\u0437?"}),a(K,{children:m(ce,{children:[m("div",{children:["\u041E\u0442\u043A\u0443\u0434\u0430: ",r==null?void 0:r.value]}),m("div",{children:["\u041A\u0443\u0434\u0430: ",c==null?void 0:c.value]}),m("div",{children:["\u0412\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430: ",h]}),m("div",{children:["\u041F\u0440\u0438\u043C\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C: ",p]})]})}),m(ae,{children:[a(A,{autoFocus:!0,onClick:i,children:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C"}),a(A,{onClick:U,autoFocus:!0,children:"\u0414\u0430, \u0441\u043E\u0437\u0434\u0430\u0442\u044C"})]})]})]})]})}function fe({onSelect:e,address:o}){const[n,s]=g.exports.useState([]),[d,p]=g.exports.useState(null);g.exports.useEffect(()=>{l(o)},[o]);const l=u=>{d&&clearTimeout(d);const i=setTimeout(()=>{s([]);const C={headers:{"Sec-Fetch-Dest":"empty","Sec-Fetch-Mod":"cors","Sec-Fetch-Site":"same-origin","X-Site-VtmId":"134","X-Site-VtmGroupId":"56",Accept:"*/*"}};x.defaults.withCredentials=!1,x.get("https://websites.platform.taximaster.ru/v2/find_address?needle="+u,{headers:C.headers}).then(S=>{const h=[];S.data.map((_,r)=>{r<=9&&h.push(_)}),s(h)}).catch(S=>{console.log(S.response)}).finally(()=>{})},500);p(i)};return a(Z,{onChange:(u,i)=>{e(i)},options:n,getOptionLabel:u=>u.value,onInputChange:(u,i)=>{l(i)},renderInput:u=>a(N,{...u,label:"\u041A\u0443\u0434\u0430 \u0434\u043E\u0441\u0442\u0430\u0432\u0438\u0442\u044C",variant:"outlined"})})}export{be as default};
